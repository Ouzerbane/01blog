<div class="admin-dashboard">

  <h1 class="title">Admin Dashboard</h1>


  <!-- 3 COLUMNS LAYOUT -->
  <div class="admin-grid">

    <!-- USERS (LEFT) -->
    <section class="admin-section">
      <h2>Users</h2>
      <table>
        <thead>
          <tr>
            <th>Username</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody *ngFor="let user of users">
          <tr>
            <td>{{user.username}}</td>
            <td><span class="status active">{{user.action}}</span></td>
            <td>
              <button class="btn ban" (click)="BanUser(user.id)">{{user.ban}}</button>
              <button class="btn delete" (click)="showpopap(user)">Delete</button>
            </td>
          </tr>

          <div class="modal-overlay" *ngIf="user.showConfirm">
            <div class="confirm-modal">
              <h3>Confirmation</h3>
              <p>are you sure you want to remove {{user.username}} </p>
              <div class="modal-actions">
                <button class="btn cancel" (click)="showpopap(user)">Cancel</button>
                <button class="btn confirm" (click)="DeletUser(user.id)">Confirm</button>
              </div>
            </div>
          </div>
        </tbody>
      </table>
    </section>

    <!-- POSTS (CENTER) -->
    <!-- POSTS (CENTER) -->
    <section class="admin-section">
      <h2>Posts</h2>

      <div class="posts-grid">
        <div class="post-card" *ngFor="let post of posts">

          <div class="post-header">
            <span class="author">{{ post.author.username }}</span>
            <span class="time">{{ post.createdAt | date:'short' }}</span>
          </div>

          <h4 class="post-title">{{ post.title }}</h4>
          <p class="post-content">{{ post.content }}</p>

          <!-- الصورة غير إلا كانت موجودة -->
          <img *ngIf="post.imageUrl" [src]="post.imageUrl" alt="Post image" class="post-image" />

          <div class="post-actions">
            <button class="btn hide" (click)="changeStatus(post.id)">
              {{ post.status }}
            </button>
            <button class="btn delete" (click)="showpopap(post)">
              Delete
            </button>

            <div class="modal-overlay" *ngIf="post.showConfirm">
              <div class="confirm-modal">
                <h3>Confirmation</h3>
                <p>are you sure you want to remove this post </p>
                <div class="modal-actions">
                  <button class="btn cancel" (click)="showpopap(post)">Cancel</button>
                  <button class="btn confirm" (click)="deletePost(post)">Confirm</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>



    <!-- REPORTS (RIGHT) -->
    <section class="admin-section">
      <h2>Reports</h2>

      <div class="report-card" *ngFor="let report of reports">
        <p><strong>reporter:</strong> {{report.reporter}}</p>
        <p><strong>targetUser:</strong> {{report.targetUser}}</p>
        <p><strong>Reason:</strong> {{report.reason}}</p>
        <div class="report-actions">
          <!-- <button class="btn resolve">Resolve</button> -->
          <button class="btn delete" (click)="DeletReport(report.id)">Remove</button>
        </div>
      </div>
    </section>

  </div>

</div>