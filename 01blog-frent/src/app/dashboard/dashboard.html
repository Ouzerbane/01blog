<div class="dashboard-container">
  <header>
    <h1>Dashboard</h1>
    <nav>
      <ul>
        <li>Home</li>
        <li>Profile</li>
        <li>Logout</li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="stats">
       <!-- üîπ Cards row (followers, following, create post) -->
      <div class="stats-header">
        <div class="card" (click)="openFollowers()">
          <h3>Followers</h3>
          <p>{{ followers }}</p>
        </div>

        <div class="card" (click)="openFollowing()">
          <h3>Following</h3>
          <p>{{ following }}</p>
        </div>

        <!-- üü¢ New Create Post Card -->
        <div class="card create-post" (click)="PopatPost()">
          <h3>‚ûï Create Post</h3>
        </div>
      </div>

      <!-- üîπ Posts section -->
      <div *ngFor="let post of posts" class="post-card">
        <p><small>By {{ post.author.username }} ({{ post.author.email }})</small></p>
        <p><small>{{ post.createdAt | date: 'short' }}</small></p>
        <h4>{{ post.title }}</h4>
        <p>{{ post.content }}</p>
        <img *ngIf="post.imageUrl" [src]="post.imageUrl" alt="Post image" />

        <div class="post-actions">
          <button class="action-btn">
            <span class="icon">‚ù§Ô∏è</span>
            <span class="count">12</span>
          </button>
          <button class="action-btn">
            <span class="icon">üí¨</span>
            <span class="count">3</span>
          </button>
        </div>
      </div>

      <!-- üîπ Pagination -->
      <div class="pagination">
        <button (click)="changePage(page - 1)" [disabled]="page === 0">‚¨Ö Prev</button>
        <span>Page {{ page + 1 }}</span>
        <button (click)="changePage(page + 1)">Next ‚û°</button>
      </div>
    </section>

    <!-- üîπ Suggested users -->
    <section class="recent-activity">
      <h2>Suggested for you</h2>
      <div class="suggested-list">
        <div *ngFor="let user of suggested" class="suggested-user">
          <div class="user-info">
            <div class="avatar">{{ user.username.charAt(0).toUpperCase() }}</div>
            <span>{{ user.username }}</span>
          </div>
          <button class="follow-btn" [class.following]="user.followed" (click)="toggleFollow(user)">
            {{ user.followed ? 'Following' : 'Follow' }}
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- üîπ Followers Modal -->
  <div class="modal" *ngIf="showFollowers">
    <div class="modal-content">
      <h3>Followers</h3>
      <div class="suggested-list">
        <div *ngFor="let user of followersList" class="suggested-user">
          <div class="user-info">
            <div class="avatar">{{ user.username.charAt(0).toUpperCase() }}</div>
            <span>{{ user.username }}</span>
          </div>
          <button class="follow-btn" [class.following]="user.followed" (click)="toggleFollow(user)">
            {{ user.followed ? 'Following' : 'Follow' }}
          </button>
        </div>
      </div>
      <button class="close-btn" (click)="closeModal()">Close</button>
    </div>
  </div>

  <!-- üîπ Following Modal -->
  <div class="modal" *ngIf="showFollowing">
    <div class="modal-content">
      <h3>Following</h3>
      <div class="suggested-list">
        <div *ngFor="let user of followingList" class="suggested-user">
          <div class="user-info">
            <div class="avatar">{{ user.username.charAt(0).toUpperCase() }}</div>
            <span>{{ user.username }}</span>
          </div>
          <button class="follow-btn" [class.following]="user.followed" (click)="toggleFollow(user)">
            {{ user.followed ? 'Following' : 'Follow' }}
          </button>
        </div>
      </div>
      <button class="close-btn" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>
